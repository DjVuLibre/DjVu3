<HTML>
<HEAD>
   <TITLE>class  DjVuFileCache</TITLE>
   <META NAME="GENERATOR" CONTENT="DOC++ 3.4.1">
</HEAD>
<BODY BGCOLOR=#fefefe BACKGROUND=back.jpg>

<H2>class  <A HREF="#DOC.DOCU">DjVuFileCache</A></H2>
<BLOCKQUOTE><TT>DjVuFileCache</TT> is a simple list of <!1><A HREF="DjVuFile.html">DjVuFile</A> instances.</BLOCKQUOTE>
<HR>

<DL>
<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<A HREF="#DOC.1.5.31.1.1"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A> <B>DjVuFileCache</B>(int max_size=5*2*1024*1024)
<DD><I>Constructs the <TT>DjVuFileCache</TT> </I>
<DT>
<A HREF="#DOC.1.5.31.1.2"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>void <B>del_file</B>(const <!1><A HREF="DjVuFile.html">DjVuFile</A> * file)
<DD><I>Removes file <TT>file</TT> from the cache </I>
<DT>
<A HREF="#DOC.1.5.31.1.3"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>void <B>add_file</B>(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)
<DD><I>Adds the given file to the cache.</I>
<DT>
<A HREF="#DOC.1.5.31.1.4"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>void <B>clear</B>(void)
<DD><I>Clears the cache.</I>
<DT>
<A HREF="#DOC.1.5.31.1.5"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>void <B>set_max_size</B>(int max_size)
<DD><I>Sets new maximum size.</I>
<DT>
<A HREF="#DOC.1.5.31.1.6"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>int <B>get_max_size</B>(void) const 
<DD><I>Returns the maximum allowed size of the cache.</I>
<DT>
<A HREF="#DOC.1.5.31.1.7"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>void <B>enable</B>(bool en)
<DD><I>Enables or disables the cache.</I>
<DT>
<A HREF="#DOC.1.5.31.1.8"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>bool <B>is_enabled</B>(void) const 
<DD><I>Returns <TT>TRUE</TT> if the cache is enabled, <TT>FALSE</TT> otherwise.</I>
</DL></P>

<P><DL>
<DT><H3>Protected Methods</H3><DD><DT>
<A HREF="#DOC.1.5.31.1.9"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>virtual   void <B>file_added</B>(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)
<DD><I>This function is called right after the given file has been added to the cache for management.</I>
<DT>
<A HREF="#DOC.1.5.31.1.10"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>virtual   void <B>file_deleted</B>(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)
<DD><I>This function is called when the given file is no longer managed by the cache.</I>
<DT>
<A HREF="#DOC.1.5.31.1.11"><IMG ALT="[more]" BORDER=0 SRC=icon1.gif></A>virtual   void <B>file_cleared</B>(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)
<DD><I>This function is called when after the cache decides to get rid of the file.</I>
</DL></P>

</DL>

<A NAME="DOC.DOCU">
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE><TT>DjVuFileCache</TT> is a simple list of <!1><A HREF="DjVuFile.html">DjVuFile</A> instances. It keeps
track of the total size of all elements and can get rid of the oldest
one once the total size becomes over some threshold. Its main purpose
is to keep the added <!1><A HREF="DjVuFile.html">DjVuFile</A> instances alive until their size
exceeds some given threshold (set by set_maximum_size() function).
The user is supposed to use DjVuPortcaster::name_to_port() to
find a file corresponding to a given name. The cache provides no
naming services </BLOCKQUOTE>
<DL>

<A NAME="DjVuFileCache">
<A NAME="DOC.1.5.31.1.1">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> DjVuFileCache(int max_size=5*2*1024*1024)</B></TT>
<DD>Constructs the <TT>DjVuFileCache</TT>

<DL><DT><DT><B>Parameters:</B><DD><B>max_size</B> -  Maximum allowed size of the cache in bytes. <BR><DD></DL><P>
<A NAME="del_file">
<A NAME="DOC.1.5.31.1.2">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void del_file(const <!1><A HREF="DjVuFile.html">DjVuFile</A> * file)</B></TT>
<DD>Removes file <TT>file</TT> from the cache 
<DL><DT><DD></DL><P>
<A NAME="add_file">
<A NAME="DOC.1.5.31.1.3">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void add_file(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)</B></TT>
<DD>Adds the given file to the cache. It it's already there, its
timestamp will be refreshed. 
<DL><DT><DD></DL><P>
<A NAME="clear">
<A NAME="DOC.1.5.31.1.4">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void clear(void)</B></TT>
<DD>Clears the cache. All items will be deleted. 
<DL><DT><DD></DL><P>
<A NAME="set_max_size">
<A NAME="DOC.1.5.31.1.5">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void set_max_size(int max_size)</B></TT>
<DD>Sets new maximum size. If the total size of all items in the cache
is greater than <TT>max_size</TT>, the cache will be deleting the oldest
items until the size is OK. 
<DL><DT><DD></DL><P>
<A NAME="get_max_size">
<A NAME="DOC.1.5.31.1.6">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int get_max_size(void) const </B></TT>
<DD>Returns the maximum allowed size of the cache. 
<DL><DT><DD></DL><P>
<A NAME="enable">
<A NAME="DOC.1.5.31.1.7">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>void enable(bool en)</B></TT>
<DD>Enables or disables the cache. See <!1><A HREF="DjVuFileCache.html#DOC.1.5.31.1.8">is_enabled</A>() for details

<DL><DT><DT><B>Parameters:</B><DD><B>en</B> -  - If <EM>en</EM> is TRUE, the cache will be enabled.
Otherwise it will be disabled.<BR><DD></DL><P>
<A NAME="is_enabled">
<A NAME="DOC.1.5.31.1.8">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>bool is_enabled(void) const </B></TT>
<DD>Returns <TT>TRUE</TT> if the cache is enabled, <TT>FALSE</TT> otherwise.
When a cache is disabled, <!1><A HREF="DjVuFileCache.html#DOC.1.5.31.1.3">add_file</A>(), and
<!1><A HREF="DjVuFileCache.html#DOC.1.5.31.1.2">del_file</A>() do nothing. But the <EM>maximum size</EM> is preserved
inside the class so that next time the cache is enabled, it will
be configured the same way. Clearly this "enable/disable" thing is
for convenience only. One could easily simulate this behavior by
setting the <EM>maximum size</EM> of the cache to <TT>ZERO</TT>. 
<DL><DT><DD></DL><P>
<A NAME="file_added">
<A NAME="DOC.1.5.31.1.9">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void file_added(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)</B></TT>
<DD>This function is called right after the given file has been added
to the cache for management. 
<DL><DT><DD></DL><P>
<A NAME="file_deleted">
<A NAME="DOC.1.5.31.1.10">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void file_deleted(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)</B></TT>
<DD>This function is called when the given file is no longer
managed by the cache. 
<DL><DT><DD></DL><P>
<A NAME="file_cleared">
<A NAME="DOC.1.5.31.1.11">
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void file_cleared(const <!1><A HREF="GP.html">GP</A>&lt;<!1><A HREF="DjVuFile.html">DjVuFile</A>&gt; &amp; file)</B></TT>
<DD>This function is called when after the cache decides to get rid
of the file. 
<DL><DT><DD></DL><P></DL>

<HR><DL><DT><B>This class has no child classes.</B></DL>

<DL><DT><DD></DL><P><I><A HREF="index.html">Alphabetic index</A></I> <I><A HREF="HIER.html">HTML hierarchy of classes</A> or <A HREF="HIERjava.html">Java</A></I><P><HR>
<!-- This is were the DOC++ footer is defined  -->

<font face="arial,helvetica" size="2">
<a href=http://www.djvu.att.com>DjVu</a> is a trademark of AT&amp;T.  
<br>All other products mentioned are registered trademarks or trademarks of
their respective companies.
</font>
